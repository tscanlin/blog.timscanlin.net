{"head":{"title":"Login Bash Script","layout":"Post","date":"2015-09-30T00:00:00.000Z","paths":[{"path":"/blog/2015/login-bash-script","buildHtml":true},{"path":"/2015/09/30/login-bash-script","buildHtml":true}],"draft":false,"summary":"JavaScript is my happy place. It's the language I'm most comfortable in and I really enjoy using it both in the browser and with node.js even though it has a number of <a href=\"https://www.pubnub.com/blog/kyle-simpson-asks-javascript-wtf/\">weird quirks</a>.","description":"JavaScript is my happy place. It's the language I'm most comfortable in and I really enjoy using it both in the browser and with node.jsâ€¦"},"body":"<p>JavaScript is my happy place. It's the language I'm most comfortable in and I really enjoy using it both in the browser and with node.js even though it has a number of <a href=\"https://www.pubnub.com/blog/kyle-simpson-asks-javascript-wtf/\">weird quirks</a>.</p>\n<p>That being said, I do enjoy writing code in other languages as well. My second favorite is probably Python due to its clean and simple syntax. However, I find myself using bash scripts more and more these days due to its versatility and ubiquity. Its great for things like syncing files between directories (rsync ftw!) and performing database maintenance tasks. I'll write articles on those scripts soon, but first let's start simple.</p>\n<p>Today I'm going to walk through a script I recently made to simplify the process of logging into remote servers using ssh. This is super simple and doesn't really do anything fancy. But I think it's a worthwhile starting point if you haven't worked with bash scripting too much. Let me step through it and explain it step by step.</p>\n<p>First you will notice the grayed out lines all start with the '#' sign. This is how comments are written in bash scripts as opposed to JavaScript where '//' are used at the beginning of a line to indicate that the line is commented out. Next, you will see that there is a function called \"webhost\", this function is declared in much the same way that it would be declared in JavaScript. Inside the function it executes the command \"ssh tim@server.com -p 2022\", this basically says \"ssh into the server 'server.com' as the user 'tim' on port '2022'\".</p>\n<pre><code class=\"hljs language-sh\"><span class=\"hljs-meta\">#!/bin/sh</span>\n<span class=\"hljs-comment\"># Login</span>\n<span class=\"hljs-comment\"># version: 1.0</span>\n<span class=\"hljs-comment\"># date: 2015-09-29</span>\n<span class=\"hljs-comment\"># author: Tim Scanlin</span>\n\n<span class=\"hljs-comment\"># CONNECTIONS</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-function\"><span class=\"hljs-title\">webhost</span></span>() {\n\tssh tim@server.com -p 2022\n}</code></pre>\n<p>Hope you are with me so far. Next is an example of a multi-line string. This makes use of the <a href=\"https://en.wikipedia.org/wiki/Here_document\">Heredoc</a> syntax in bash. This syntax is available in many other programming languages as well and isn't specific to bash. Its most useful for storing longer form text and banners like this.</p>\n<pre><code class=\"hljs language-sh\"><span class=\"hljs-comment\"># BANNER</span>\nBANNER=$( cat &#x3C;&#x3C; EOF\n\n==================================================\n=                LOGIN UTILITY v1                =\n==================================================\n\nHost: <span class=\"hljs-variable\">$HOSTNAME</span>\n\nEOF\n)</code></pre>\n<p>Finally, there is the main logic of the script. First we echo the $BANNER variable to display it in the console and identify the script, then we check for any passed in parameters. If there aren't any parameters or if the parameter is \"-h\" then we show how to use the script and some possible input values. Then we prompt the user for some input and read it into the $COMMAND variable. Finally we run the function matching that $COMMAND.</p>\n<pre><code class=\"hljs language-sh\"><span class=\"hljs-comment\"># EXECUTION STARTS HERE</span>\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$BANNER</span>\"</span>\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"\"</span>\n\n<span class=\"hljs-keyword\">if</span> [ <span class=\"hljs-variable\">$#</span> <span class=\"hljs-_\">-eq</span> 0 ] || [ <span class=\"hljs-variable\">$1</span> == <span class=\"hljs-string\">\"-h\"</span> ] <span class=\"hljs-comment\">#check for no params or -h</span>\n<span class=\"hljs-keyword\">then</span>\n\t<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"Usage:\"</span>\n\t<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"&#x3C;server alias>\"</span>\n\t<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"\"</span>\n\t<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"Options: webhost\"</span>\n\t<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"\"</span>\n\n\t<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"> What server would you like to login to?\"</span>\n\t<span class=\"hljs-built_in\">read</span> COMMAND\n<span class=\"hljs-keyword\">else</span>\n\tCOMMAND=<span class=\"hljs-string\">\"<span class=\"hljs-variable\">$1</span>\"</span>\n<span class=\"hljs-keyword\">fi</span>\n\n<span class=\"hljs-variable\">$COMMAND</span>\n\n<span class=\"hljs-built_in\">exit</span>;</code></pre>\n<p>The benefit of having this conditional is that you can run the script from the terminal by typing \"login.sh\" and it will tell you how to use the script and some possible input values allowing you to continue on from there, or if you already know the available options then you can just run \"login.sh webhost\" and it will go straight to executing the \"webhost\" function.</p>\n<p>This is very basic but could be expanded upon to add multiple functions, one for each server you login in to, as well as a starting point for many other scripts with a variety of functionality. Hope you enjoyed this short tutorial!</p>\n<p>Full script below:</p>\n<pre><code class=\"hljs language-sh\"><span class=\"hljs-meta\">#!/bin/sh</span>\n<span class=\"hljs-comment\"># Login</span>\n<span class=\"hljs-comment\"># version: 1.0</span>\n<span class=\"hljs-comment\"># date: 2015-09-29</span>\n<span class=\"hljs-comment\"># author: Tim Scanlin</span>\n\n<span class=\"hljs-comment\"># CONNECTIONS</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-function\"><span class=\"hljs-title\">webhost</span></span>() {\n\tssh tim@server.com -p 2022\n}\n\n<span class=\"hljs-comment\"># BANNER</span>\nBANNER=$( cat &#x3C;&#x3C; EOF\n\n==================================================\n=                LOGIN UTILITY v1                =\n==================================================\n\nHost: <span class=\"hljs-variable\">$HOSTNAME</span>\n\nEOF\n)\n\n<span class=\"hljs-comment\"># EXECUTION STARTS HERE</span>\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$BANNER</span>\"</span>\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"\"</span>\n\n<span class=\"hljs-keyword\">if</span> [ <span class=\"hljs-variable\">$#</span> <span class=\"hljs-_\">-eq</span> 0 ] || [ <span class=\"hljs-variable\">$1</span> == <span class=\"hljs-string\">\"-h\"</span> ] <span class=\"hljs-comment\">#check for no params or -h</span>\n<span class=\"hljs-keyword\">then</span>\n\t<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"Usage:\"</span>\n\t<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"&#x3C;server alias>\"</span>\n\t<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"\"</span>\n\t<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"Options: webhost\"</span>\n\t<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"\"</span>\n\n\t<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"> What server would you like to login to?\"</span>\n\t<span class=\"hljs-built_in\">read</span> COMMAND\n<span class=\"hljs-keyword\">else</span>\n\tCOMMAND=<span class=\"hljs-string\">\"<span class=\"hljs-variable\">$1</span>\"</span>\n<span class=\"hljs-keyword\">fi</span>\n\n<span class=\"hljs-variable\">$COMMAND</span>\n\n<span class=\"hljs-built_in\">exit</span>;</code></pre>\n","__filename":"posts/2015/login-bash-script.md","__url":"/posts/2015/login-bash-script/","__resourceUrl":"/posts/2015/login-bash-script/index.html","__dataUrl":"/posts/2015/login-bash-script/index.html.dcf63cffd6a67febc3b339296777d96c.json"}